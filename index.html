<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Yes Bheem Dashboard - Sales intelligence and analytics platform">
    <title>Yes Bheem - Sales Intelligence</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Set base path dynamically -->
    <script>
        // Detect base path from URL
        const pathname = window.location.pathname;
        let basePath = '/';

        // Check if we're in a subdirectory (e.g., /yesbheem/)
        // But ignore app routes (SPA routes)
        const appRoutes = ['/dashboard', '/dealer', '/discussions', '/instance', '/b2b-leads', '/product', '/pricelist', '/media', '/yesbheem', '/template', '/broadcast', '/welcome', '/chatbot', '/groupgrabber', '/report', '/integration', '/settings', '/cirtificates'];
        const isAppRoute = appRoutes.some(route => pathname.startsWith(route));

        const match = pathname.match(/^(\/[^\/]+)\//);
        if (match && match[1] !== '' && !isAppRoute) {
            basePath = match[1] + '/';
        }

        // Set base tag using document.write to block preloader requests relative to wrong path
        document.write('<base href="' + window.location.origin + basePath + '">');
    </script>

    <!-- Modular CSS -->
    <link rel="stylesheet" href="/css/variables.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/components.css?v=2">
    <link rel="stylesheet" href="/css/map.css">
    <link rel="stylesheet" href="/css/settings.css">
    <link rel="stylesheet" href="/css/discussions.css?v=4">
</head>

<body>
    <!-- Initial Loading Overlay to prevent FOUC -->
    <div id="initial-loader"
        style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #050505; z-index: 10000; display: flex; align-items: center; justify-content: center; color: white; font-family: sans-serif;">
        <div style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#2563EB" stroke-width="3"
                stroke-linecap="round" stroke-linejoin="round" style="animation: spin 1s linear infinite;">
                <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
            </svg>
            <span
                style="font-size: 0.9rem; opacity: 0.7; animation: pulse 1.5s ease-in-out infinite;">Authenticating...</span>
        </div>
        <style>
            @keyframes spin {
                100% {
                    transform: rotate(360deg);
                }
            }

            @keyframes pulse {

                0%,
                100% {
                    opacity: 0.5;
                }

                50% {
                    opacity: 1;
                }
            }
        </style>
    </div>

    <a href="#main-content" class="skip-link">Skip to main content</a>
    <!-- Fixed Title Bar -->
    <header class="title-bar">
        <div class="title-bar-content">
            <div class="title-bar-left">
                <!-- Branding replaces toggle button -->
                <div class="title-bar-brand" id="mobile-sidebar-toggle" style="cursor: pointer;" title="Toggle Sidebar">
                    <h1>Yes Bheem</h1>
                </div>
            </div>
            <div class="title-bar-right">
                <div class="user-badge-container">
                    <div class="user-badge" id="user-badge">
                        <div class="user-avatar-small">U</div>
                        <span class="user-name-small">User</span>
                        <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                            <path d="M6 8L2 4h8z" />
                        </svg>
                    </div>
                    <div class="theme-dropdown" id="theme-dropdown">
                        <div class="dropdown-item" data-theme="dark">
                            <span class="theme-icon">üåô</span>
                            <span>Dark Theme</span>
                            <span class="checkmark">‚úì</span>
                        </div>
                        <div class="dropdown-item" data-theme="light">
                            <span class="theme-icon">‚òÄÔ∏è</span>
                            <span>Light Theme</span>
                            <span class="checkmark">‚úì</span>
                        </div>
                        <div class="dropdown-divider"
                            style="height: 1px; background: rgba(255,255,255,0.1); margin: 5px 0;"></div>
                        <div class="dropdown-item" id="sign-out-button" style="color: #ff6b6b;">
                            <span class="theme-icon">üö™</span>
                            <span>Sign Out</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="dashboard-container">
        <!-- Collapsible Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Navigation Menu -->
            <nav class="nav-menu">
                <div class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Dashboard</span>
                </div>
                <div class="nav-item" data-page="discussions">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">Tasks</span>
                </div>
                <div class="nav-item" data-page="dealer">
                    <span class="nav-icon">ü§ù</span>
                    <span class="nav-text">Dealer</span>
                </div>
                <div class="nav-item" data-page="b2b-leads">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-text">B2B Leads</span>
                </div>
                <div class="nav-item" data-page="template">
                    <span class="nav-icon">üìÑ</span>
                    <span class="nav-text">Template</span>
                </div>
                <div class="nav-item" data-page="media">
                    <span class="nav-icon">üñºÔ∏è</span>
                    <span class="nav-text">Media</span>
                </div>
                <div class="nav-item" data-page="campaign">
                    <span class="nav-icon">üì¢</span>
                    <span class="nav-text">Campaign</span>
                </div>
                <div class="nav-item" data-page="product">
                    <span class="nav-icon">üì¶</span>
                    <span class="nav-text">Product</span>
                </div>
                <div class="nav-item" data-page="instance">
                    <span class="nav-icon">üñ•Ô∏è</span>
                    <span class="nav-text">Instance</span>
                </div>
                <div class="nav-item" data-page="yesbheem">
                    <span class="nav-icon">‚ö°</span>
                    <span class="nav-text">Yes Bheem</span>
                </div>
                <div class="nav-item" data-page="chatbot">
                    <span class="nav-icon">ü§ñ</span>
                    <span class="nav-text">Chatbot</span>
                </div>
                <div class="nav-item" data-page="integration">
                    <span class="nav-icon">üîå</span>
                    <span class="nav-text">Integration</span>
                </div>
                <div class="nav-item" data-page="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span class="nav-text">Settings</span>
                </div>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <!-- Dynamic page content loaded here -->
            <div id="page-content">
                <!-- Content will be loaded by nav_controller.js -->
            </div>
        </main>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ¬ß 1 ‚Äî LIBRARIES  (third-party, no Firebase deps)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- PDF.js for thumbnail generation in media page -->
    <script src="/js/libs/pdf.min.js"></script>
    <script>
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = '/js/libs/pdf.worker.min.js';
        }
    </script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ¬ß 2 ‚Äî CONFIG & THEME  (must load before any manager)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script src="/js/config.js"></script>
    <script src="/js/theme_manager.js"></script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ¬ß 3 ‚Äî SHARED SERVICES  (non-module helpers used by managers below)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script src="/js/services/template_service.js"></script>
    <script src="/js/services/media_service.js"></script>
    <script src="/js/components/media_selector.js"></script>
    <script src="/js/renderers/template_renderer.js"></script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ¬ß 4 ‚Äî PAGE MANAGERS  (ES modules ‚Äî expose classes on window.*)
              Loaded here once; instantiated by PAGE_REGISTRY on each nav.
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <!-- Shared renderers -->
    <script type="module" src="/js/ui_renderer.js"></script>
    <script type="module" src="/js/data_manager.js"></script>
    <script type="module" src="/js/services/b2b_leads_service.js"></script>

    <!-- Per-page managers -->
    <script type="module" src="/js/b2b_leads_manager.js"></script>
    <script type="module" src="/js/dealer_manager.js"></script>
    <script type="module" src="/js/controllers/dashboard_controller.js"></script>
    <script src="/js/template_manager.js"></script>
    <script type="module" src="/js/campaign_manager.js"></script>
    <script type="module" src="/js/instance_manager.js"></script>
    <script src="/js/media_manager.js"></script>
    <script type="module" src="/js/controllers/board_controller.js"></script>

    <!-- Settings (4 controllers for the settings page) -->
    <script type="module" src="/js/controllers/settings_controller.js"></script>
    <script type="module" src="/js/controllers/settings_data_controller.js"></script>
    <script type="module" src="/js/controllers/settings_users_controller.js"></script>
    <script type="module" src="/js/controllers/settings_security_controller.js"></script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ¬ß 5 ‚Äî AUTH & LOGIN  (must come before nav_controller)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script type="module" src="/js/auth_fortress.js"></script>
    <script src="/js/login_controller.js"></script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ¬ß 6 ‚Äî NAVIGATION  (bootstraps the SPA ‚Äî must be last)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script src="/js/nav_controller.js?v=10"></script>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         ¬ß 7 ‚Äî SECURITY LAYER  (runs after nav; monitors auth state)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <script type="module" src="/js/security_overlay.js"></script>
</body>

</html>